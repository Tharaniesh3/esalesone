"use strict";(()=>{var e={};e.id=982,e.ids=[982],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5550:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>h,patchFetch:()=>S,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var n={};t.r(n),t.d(n,{GET:()=>p});var o=t(5419),i=t(9108),a=t(9678),d=t(8070),u=t(1494),s=t(1620);async function p(e,{params:r}){try{await (0,u.Z)();let e=await s.K.findOne({orderNumber:r.orderNumber}).populate("product");if(!e)return d.Z.json({error:"Order not found"},{status:404});return d.Z.json(e)}catch(e){return d.Z.json({error:"Failed to fetch order"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/orders/[orderNumber]/route",pathname:"/api/orders/[orderNumber]",filename:"route",bundlePath:"app/api/orders/[orderNumber]/route"},resolvedPagePath:"C:\\Users\\wwwth\\OneDrive\\\uD83D\uDCBB\\eSalesone\\src\\app\\api\\orders\\[orderNumber]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:y,staticGenerationBailout:f}=l,h="/api/orders/[orderNumber]/route";function S(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},1494:(e,r,t)=>{t.d(r,{Z:()=>d});var n=t(1185),o=t.n(n);let i=process.env.MONGODB_URI||"mongodb://localhost:27017/esalesone";if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env");let a=global.mongoose||{conn:null,promise:null};a||(a=global.mongoose={conn:null,promise:null});let d=async function(){if(a.conn)return a.conn;a.promise||(a.promise=o().connect(i,{bufferCommands:!1}).then(e=>(a.conn=e,e)));try{await a.promise}catch(e){throw a.promise=null,e}return a.conn}},1620:(e,r,t)=>{t.d(r,{K:()=>a});var n=t(1185),o=t.n(n);let i=new(o()).Schema({orderNumber:{type:String,required:!0,unique:!0,default:()=>`ORD-${Date.now()}-${Math.floor(1e3*Math.random())}`},items:[{product:{type:o().Schema.Types.ObjectId,ref:"Product",required:!0},quantity:{type:Number,required:!0,min:1},price:{type:Number,required:!0},selectedVariant:{color:String,size:String}}],customerInfo:{fullName:{type:String,required:!0},email:{type:String,required:!0},phone:{type:String,required:!0},address:{type:String,required:!0},city:{type:String,required:!0},state:{type:String,required:!0},zipCode:{type:String,required:!0},country:{type:String,required:!0}},total:{type:Number,required:!0},status:{type:String,enum:["processing","shipped","delivered","cancelled"],default:"processing"},paymentStatus:{type:String,enum:["pending","paid","failed","refunded"],default:"pending"},paymentMethod:{type:String,enum:["credit_card","paypal"],required:!0},paymentDetails:{last4:String,transactionId:String}},{timestamps:!0});i.index({orderNumber:1}),i.index({"customerInfo.email":1}),i.index({createdAt:-1});let a=o().models.Order||o().model("Order",i)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[638,206],()=>t(5550));module.exports=n})();