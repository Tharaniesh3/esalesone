"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6429:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>f});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>p});var o=r(5419),i=r(9108),a=r(9678),s=r(8070),u=r(1494),c=r(4898);async function d(){try{await (0,u.Z)();let e=await c.x.find({});return s.Z.json(e)}catch(e){return s.Z.json({error:"Failed to fetch products"},{status:500})}}async function p(e){try{await (0,u.Z)();let t=await e.json(),r=await c.x.create(t);return s.Z.json(r,{status:201})}catch(e){return s.Z.json({error:"Failed to create product"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"C:\\Users\\wwwth\\OneDrive\\\uD83D\uDCBB\\eSalesone\\src\\app\\api\\products\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:y,headerHooks:h,staticGenerationBailout:f}=l,x="/api/products/route";function v(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},1494:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1185),o=r.n(n);let i=process.env.MONGODB_URI||"mongodb://localhost:27017/esalesone";if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env");let a=global.mongoose||{conn:null,promise:null};a||(a=global.mongoose={conn:null,promise:null});let s=async function(){if(a.conn)return a.conn;a.promise||(a.promise=o().connect(i,{bufferCommands:!1}).then(e=>(a.conn=e,e)));try{await a.promise}catch(e){throw a.promise=null,e}return a.conn}},4898:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(1185),o=r.n(n);let i=new(o()).Schema({name:{type:String,required:!0},description:{type:String,required:!0},price:{type:Number,required:!0,min:0},image:{type:String,required:!0},category:{type:String,required:!0},inventory:{type:Number,required:!0,min:0,default:0},variants:[{name:{type:String,required:!0,enum:["color","size"]},options:[String]}],discount:{type:Number,min:0,max:100,default:0},isNew:{type:Boolean,default:!1},rating:{type:Number,min:0,max:5,default:0},reviews:[{user:{type:o().Schema.Types.ObjectId,ref:"User"},rating:{type:Number,required:!0,min:1,max:5},comment:String,createdAt:{type:Date,default:Date.now}}]},{timestamps:!0});i.index({name:"text",description:"text"}),i.index({category:1}),i.index({price:1}),i.index({isNew:1}),i.index({rating:-1});let a=o().models.Product||o().model("Product",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,206],()=>r(6429));module.exports=n})();