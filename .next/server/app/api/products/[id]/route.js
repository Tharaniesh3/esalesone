"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7193:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var n={};r.r(n),r.d(n,{GET:()=>p});var o=r(5419),i=r(9108),a=r(9678),s=r(8070),u=r(1494),d=r(4898);async function p(e,{params:t}){try{await (0,u.Z)();let e=await d.x.findById(t.id);if(!e)return s.Z.json({error:"Product not found"},{status:404});return s.Z.json(e)}catch(e){return s.Z.json({error:"Failed to fetch product"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Users\\wwwth\\OneDrive\\\uD83D\uDCBB\\eSalesone\\src\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:y,staticGenerationBailout:f}=c,h="/api/products/[id]/route";function x(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},1494:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1185),o=r.n(n);let i=process.env.MONGODB_URI||"mongodb://localhost:27017/esalesone";if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env");let a=global.mongoose||{conn:null,promise:null};a||(a=global.mongoose={conn:null,promise:null});let s=async function(){if(a.conn)return a.conn;a.promise||(a.promise=o().connect(i,{bufferCommands:!1}).then(e=>(a.conn=e,e)));try{await a.promise}catch(e){throw a.promise=null,e}return a.conn}},4898:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(1185),o=r.n(n);let i=new(o()).Schema({name:{type:String,required:!0},description:{type:String,required:!0},price:{type:Number,required:!0,min:0},image:{type:String,required:!0},category:{type:String,required:!0},inventory:{type:Number,required:!0,min:0,default:0},variants:[{name:{type:String,required:!0,enum:["color","size"]},options:[String]}],discount:{type:Number,min:0,max:100,default:0},isNew:{type:Boolean,default:!1},rating:{type:Number,min:0,max:5,default:0},reviews:[{user:{type:o().Schema.Types.ObjectId,ref:"User"},rating:{type:Number,required:!0,min:1,max:5},comment:String,createdAt:{type:Date,default:Date.now}}]},{timestamps:!0});i.index({name:"text",description:"text"}),i.index({category:1}),i.index({price:1}),i.index({isNew:1}),i.index({rating:-1});let a=o().models.Product||o().model("Product",i)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,206],()=>r(7193));module.exports=n})();