(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{9564:function(e,s,t){Promise.resolve().then(t.bind(t,645))},7907:function(e,s,t){"use strict";var r=t(5313);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},645:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(3827),a=t(4090),l=t(7907),i=t(2095),n=t(703);function d(){let e=(0,l.useRouter)(),{items:s,totalPrice:t,clearCart:d}=(0,i.useCart)(),[c,o]=(0,a.useState)(1),[u,m]=(0,a.useState)(!1),[x,b]=(0,a.useState)({firstName:"",lastName:"",email:"",address:"",city:"",state:"",zipCode:"",country:"",phone:""}),[h,g]=(0,a.useState)({cardNumber:"",cardName:"",expiryDate:"",cvv:""}),p=async r=>{r.preventDefault(),m(!0);try{let r={items:s.map(e=>({product:e.id,quantity:e.quantity,selectedVariant:e.selectedVariant,price:e.price})),customerInfo:{fullName:"".concat(x.firstName," ").concat(x.lastName),email:x.email,phone:x.phone,address:x.address,city:x.city,state:x.state,zipCode:x.zipCode,country:x.country},total:1.1*t,cardNumber:h.cardNumber},a=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await a.json();a.ok?(d(),e.push("/thank-you?orderNumber=".concat(l.orderNumber))):(alert(l.error||"Failed to process order"),m(!1))}catch(e){console.error("Error processing order:",e),alert("Failed to process order. Please try again."),m(!1)}};return 0===s.length?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your Cart is Empty"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Add some items to your cart to continue checkout."}),(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Continue Shopping"})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(c>=1?"bg-blue-600 text-white":"bg-gray-200"),children:"1"}),(0,r.jsx)("div",{className:"w-24 h-1 ".concat(c>=2?"bg-blue-600":"bg-gray-200")})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(c>=2?"bg-blue-600 text-white":"bg-gray-200"),children:"2"})})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-2 text-sm text-gray-600",children:[(0,r.jsx)("span",{children:"Shipping"}),(0,r.jsx)("span",{children:"Payment"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[1===c&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Shipping Information"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(2)},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.firstName,onChange:e=>b({...x,firstName:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.lastName,onChange:e=>b({...x,lastName:e.target.value})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.email,onChange:e=>b({...x,email:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,r.jsx)("input",{type:"tel",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.phone,onChange:e=>b({...x,phone:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.address,onChange:e=>b({...x,address:e.target.value})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.city,onChange:e=>b({...x,city:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.state,onChange:e=>b({...x,state:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.zipCode,onChange:e=>b({...x,zipCode:e.target.value})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,r.jsxs)("select",{required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x.country,onChange:e=>b({...x,country:e.target.value}),children:[(0,r.jsx)("option",{value:"",children:"Select Country"}),(0,r.jsx)("option",{value:"US",children:"United States"}),(0,r.jsx)("option",{value:"CA",children:"Canada"}),(0,r.jsx)("option",{value:"UK",children:"United Kingdom"})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition",children:"Continue to Payment"})]})]}),2===c&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Payment Information"}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),(0,r.jsx)("input",{type:"text",required:!0,placeholder:"1234 5678 9012 3456",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h.cardNumber,onChange:e=>g({...h,cardNumber:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name"}),(0,r.jsx)("input",{type:"text",required:!0,placeholder:"John Doe",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h.cardName,onChange:e=>g({...h,cardName:e.target.value})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),(0,r.jsx)("input",{type:"text",required:!0,placeholder:"MM/YY",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h.expiryDate,onChange:e=>g({...h,expiryDate:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),(0,r.jsx)("input",{type:"text",required:!0,placeholder:"123",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h.cvv,onChange:e=>g({...h,cvv:e.target.value})})]})]}),(0,r.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Processing...":"Place Order"})]})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,r.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"relative w-16 h-16 flex-shrink-0",children:(0,r.jsx)(n.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover rounded-lg"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.name}),e.selectedVariant&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.selectedVariant.color&&"Color: ".concat(e.selectedVariant.color),e.selectedVariant.size&&" Size: ".concat(e.selectedVariant.size)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Qty: ",e.quantity]})]}),(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),(0,r.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsxs)("span",{children:["$",t.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,r.jsx)("span",{children:"Shipping"}),(0,r.jsx)("span",{children:"Free"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,r.jsx)("span",{children:"Tax"}),(0,r.jsxs)("span",{children:["$",(.1*t).toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-semibold text-lg pt-2 border-t",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{children:["$",(1.1*t).toFixed(2)]})]})]})]})]})})]})]})})}},2095:function(e,s,t){"use strict";t.r(s),t.d(s,{CartProvider:function(){return i},useCart:function(){return n}});var r=t(3827),a=t(4090);let l=(0,a.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("cart");e&&i(JSON.parse(e))},[]),(0,a.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(t))},[t]);let n=t.reduce((e,s)=>e+s.quantity,0),d=t.reduce((e,s)=>e+s.price*s.quantity,0);return(0,r.jsx)(l.Provider,{value:{items:t,addToCart:e=>{i(s=>s.find(s=>{var t,r,a,l;return s.id===e.id&&(null===(t=s.selectedVariant)||void 0===t?void 0:t.color)===(null===(r=e.selectedVariant)||void 0===r?void 0:r.color)&&(null===(a=s.selectedVariant)||void 0===a?void 0:a.size)===(null===(l=e.selectedVariant)||void 0===l?void 0:l.size)})?s.map(s=>{var t,r,a,l;return s.id===e.id&&(null===(t=s.selectedVariant)||void 0===t?void 0:t.color)===(null===(r=e.selectedVariant)||void 0===r?void 0:r.color)&&(null===(a=s.selectedVariant)||void 0===a?void 0:a.size)===(null===(l=e.selectedVariant)||void 0===l?void 0:l.size)?{...s,quantity:s.quantity+e.quantity}:s}):[...s,e])},removeFromCart:e=>{i(s=>s.filter(s=>s.id!==e))},updateQuantity:(e,s)=>{i(t=>t.map(t=>t.id===e?{...t,quantity:Math.max(0,s)}:t))},clearCart:()=>{i([])},totalItems:n,totalPrice:d},children:s})}function n(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[703,971,69,744],function(){return e(e.s=9564)}),_N_E=e.O()}]);